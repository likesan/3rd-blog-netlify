---
layout: post
comments: true
category: [Coding, Instagram, automacro]
thumbnail : https://images.unsplash.com/photo-1554177255-61502b352de3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80
---

* TOC
{:toc}

![instagram-auto-bot-small](https://user-images.githubusercontent.com/35059428/57276418-23f2c080-70d4-11e9-8af5-66711a5a60eb.gif)


[Git Repository](https://github.com/ollagada/instagram-auto-liker)

## 무한 감사

아 이렇게 배울 수 있었다는 사실이 참 감사하네..
이로서 업무에 실질적으로 도움이 될 수 있는 코딩을 내 스스로 해낸거다.
실제적인 실적에 도움이 될 수 있는 중대한 프로그램을 개발한 것.
불필요한 반복적인 노동을 줄여, 그 시간에 우리의 가치를 높이는 독서나 공부에 시간을 투자한다.
**시간이 사실 제일 중요한 재산**, 그 **시간**을 아낄 수 있다는 점에서... 이 프로그램을 만든건 진짜 대박이다...

물론 조금씩 더 추가해야한다.
고민도 더 해야하고...

## 현재 기분

엄청 좋다.
미친 것처럼 좋은 기분이 든다.
이걸 내가 해내다니
이런 엔돌핀이 팍팍 온다는게 정말 기분이 좋다 :D!



## 구현 과정 요약

### 깃헙 레포지토리들을 참고

깃헙 레포지토리서, Instagram Auto Like 라는 이름으로 검색

### 손이 덜 갈 것 같은 녀석으로 선택

두 세차례 실패했지만, 점점 괜찮아보이는 프로그램을 찾았다. 그나마 손이 덜 가는 녀석으로

파이썬을 할까 자바를 할까 했지만, 이왕 해보는거 연습이고 내 실력을 더 키우는데 도움이 된다는 생각이 들었다.
이미 해봤지만 오래된 '자바'라는 언어보다는, 해보지 않았고, **요즘 핫한 파이썬으로 해보기로 했다.**
파이썬이 vscode로 메모장 열듯 툭 열면 되기에 쉽기도 했다. 

### Selenium에서 Element를 지정해주는 문법에서만 4-5시간을 헤맸다.

driver.find_elements_by_css('') 로 접근하는게 제일 좋았다.

xpath로 찾을 땐 찾지 못하는 경우가 더 많았다.

class로 찾을 땐 인스타 네비에 있는 바와 중복되는 경우가 많아
스크롤링 하다 말고, 네비의 하트를 누르다 더 이상 스크롤링을 하지 못해 튕겨나가버리는 수가 있었다.

### 10시간 소요

어제 아침부터, 엘리가 자동화에 신경쓰자는 의견을 낸 뒤부터 만들기 시작했으니 검색부터 밤 11시 30분까지니, 대략 10시간 이상을 투자해만든 결과물이다.


  * 레포서 괜찮아보이는 크롤러 검색
  * 가장 Star를 많이 받은 애로 올렸으나 안됨
  * 지움

### 내 홈 피드에 뜬 사람들만 좋아요 누름

거창하지 않을 수 있다.

사람들에게 직접적으로 팔로우를 얻거나 좋아요를 따라다니면서 신청하려면, 이미 나와 팔로우 관계에 있는 사람이 아니라, 어떤 해시태그에 새로운 계시물을 올린 새로운 사람들에게 팔로우 신청 1회 + 좋아요 러쉬가 들어가야 어느정도 호감을 얻기 때문.


## 에러 로그

### 너무 많은 로그인으로 일시정지

    하도 로그인을 자주 해대니, 더 이상, 이 노트북으로 접속이 안되기 시작했다.
    이를 방지하기 위해선, 한번 로그인 한 뒤, 모든 작업을 이어서 했었어야했다.
    방법을 몰랐기에 너무 많은 로그인을 시도, 하마터면 영구 블럭될까 겁이 덜컹

### Solution    

근본적인 해결방법은, 지속적으로 로그인해야만 하는 상황을 벗어나는 것. 

이를 Selenium에서 해결하기 위해선,
[브라우저 옵션에 `add_argument('user-data-dir=selenium')` 다는 것](https://stackoverflow.com/questions/15058462/how-to-save-and-load-cookies-using-python-selenium-webdriver#answer-48665557)



Session을 계속 유지하려면 어떻게 해야하나 하고 Session 쪽의 답변들을 1시간 가량 검색하고 있었으나
그냥 저 한줄만 넣어주면, 폴더 자체를 쿠키처럼 인식하는지 다음 프로그램 실행부터는 추가적인 로그인이 필요가 없어진다.
( 저 폴더 자체가 어디에 존재하는지 정확히 파악 못한건 함정..; )


## 한글 태그 encode 에러

`hashtag = "자연식물식"`

```python
hashtag.encode('utf-8') # utf8 coder decoding error solution
UnicodeDecodeError: 'ascii' codec can't decode byte 0xec in position 0: ordinal not in range(128)
```

다시 말해, 파이썬에서 한글을 인식하지 못한다는 이야기.

### Solution

[알고봤더니 string value 앞에 `u` 한글자만 넣어주면 된단다.](https://ifyourfriendishacker.tistory.com/5)
윗 블로그에서 설명을 굉장히 쉽게, 편안하게 해주셨다. 너무도 감사! * 10000

```python
hashtag = u"#자연식물식"
```

Stackoverflow 에서는 다 엑셀에 대한 문의들이 많았을 뿐, 저렇게 1비트로 해결하는 방법은 없었다 :)

Unicode[1^]로 인식시키기 위함이라던데.
좀 더 공부가 필요하긴한 듯.

[1^]:[유니코드(Unicode)는 전 세계의 모든 문자를 컴퓨터에서 일관되게 표현하고 다룰 수 있도록 설계된 산업 표준](https://ko.wikipedia.org/wiki/%EC%9C%A0%EB%8B%88%EC%BD%94%EB%93%9C)


## 문제점

### alt 로 해보려했으나 다음 두 가지 문제를 마주했다.

1. Encoding 문제

    '음식'으로 alt를 갖는 사진들에는 좋아요를 누르지 말 것이라는 명령어를 내리고 싶었다.
    그러나 '음식'이라는 단어 자체가 깨지는 경우가 생겼음

2. 막상 해도 어디서인지 작동이 되지 않음

    이유를 파악해야하나... 지금 좋아요 누르는 것에 급급하기에 
    에러를 마구잡이로 수정하기가 복잡...




## Todo Lists

### 헤시태그로 검색 기능 추가

* [X] ~~*`#자연식물식` `#현미식` `#자연식` `#현미밥` `#과일식` `#과일다이어트` 등 과 같은 헤시태그로 검색 하게 만들기*~~ [2019-04-19]
* [X] ~~*팔로우가 안되있는 경우 팔로우 신청하기*~~ [2019-04-19]
* [X] ~~*피드 클릭 후 좋아요 클릭*~~ [2019-04-18]
* [X] ~~*그 후 오른쪽 키 누르기*~~ [2019-04-18]
* [X] ~~*또 좋아요 클릭*~~ [2019-04-18]
* [X] ~~*검색 후, 최신 피드를 클릭*~~ [2019-04-18]
* [X] ~~*위 같은 행동이 30번 정도 일어나도록 만들기*~~ [2019-04-18]
* [X] ~~*화면을 다 눌러 더 이상 좋아요할 게시물이 없으면 자동으로 꺼지도록 만들기, 혹은 Refresh를 눌러 계속해서 좋아요하도록 실시*~~ [2019-04-18]
    


